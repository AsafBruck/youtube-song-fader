<html><head>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="http://www.youtube.com/player_api"></script>

<style>
    .songList {
        width:330px;
        height:500px;
    }
</style>
</head>
<body onload="init();">

<textarea class="songList" id="songList">
https://www.youtube.com/watch?v=JkR7zClEkAo
https://www.youtube.com/watch?v=VNW9TAwImBY
https://www.youtube.com/watch?v=QSkvyG3H_KM
https://www.youtube.com/watch?v=I4M4XTsx2cA
https://www.youtube.com/watch?v=FMNAcMNedOc
https://www.youtube.com/watch?v=XVjbGvHN-IY
https://www.youtube.com/watch?v=Dwa-81884m8
https://www.youtube.com/watch?v=HL8oQw0nm0M
https://www.youtube.com/watch?v=LFgvAyJWkjU
https://www.youtube.com/watch?v=cZPE-45HJIQ
https://www.youtube.com/watch?v=lKvpo7Ma9JM
https://www.youtube.com/watch?v=HGgIhyQTHS8
https://www.youtube.com/watch?v=BJhF0L7pfo8
https://www.youtube.com/watch?v=arEOmQ_JpAw
https://www.youtube.com/watch?v=5HJCYgDnfGY
https://www.youtube.com/watch?v=WtBigNNwcmo
https://www.youtube.com/watch?v=Z2Oci7962pI
https://www.youtube.com/watch?v=t1M6KsUY3o8
https://www.youtube.com/watch?v=Np-lV0sl9Fw
https://www.youtube.com/watch?v=k0wd7pAVR1M
https://www.youtube.com/watch?v=VW6EudU6Lb0
https://www.youtube.com/watch?v=q4D0InGS0DU
https://www.youtube.com/watch?v=5d4hNLA1fZM
https://www.youtube.com/watch?v=cwY4dsU3nlI
https://www.youtube.com/watch?v=4GdGJz3Wk24
https://www.youtube.com/watch?v=Rptxw5O-nww
https://www.youtube.com/watch?v=ykZey21sYds
https://www.youtube.com/watch?v=HJLE4so-Lyw
https://www.youtube.com/watch?v=3YFMw3chWCc
https://www.youtube.com/watch?v=D-rLFtiS1JA
https://www.youtube.com/watch?v=wtmu1YWBR4A
https://www.youtube.com/watch?v=oLphMRy6lsQ
https://www.youtube.com/watch?v=tX6gSMocHaE
https://www.youtube.com/watch?v=y1D3W1W2TE4
https://www.youtube.com/watch?v=YdA-OcRX1Xw
https://www.youtube.com/watch?v=eRAEpWP7Rm8
https://www.youtube.com/watch?v=s-nyzJNZ09Q
https://www.youtube.com/watch?v=q4a0Dj4M66c
https://www.youtube.com/watch?v=euwV3qAcjUs
https://www.youtube.com/watch?v=RLNuEe-biJQ
https://www.youtube.com/watch?v=nidFjWK8rik
https://www.youtube.com/watch?v=-9OOsKVcmyE
https://www.youtube.com/watch?v=3cBk9jx6e1Y
https://www.youtube.com/watch?v=_pU0X7ZOfHs
https://www.youtube.com/watch?v=AW1zrt_cyF8
https://www.youtube.com/watch?v=K8gYcdFts00
https://www.youtube.com/watch?v=8tSfgO3AbwE
https://www.youtube.com/watch?v=xm-Bj79VKRg
https://www.youtube.com/watch?v=2T6Le21bzBU
https://www.youtube.com/watch?v=Ze_oexe6v3k
https://www.youtube.com/watch?v=w6p8s2UUzS8
https://www.youtube.com/watch?v=8M7pL6ucR9A
https://www.youtube.com/watch?v=fcrLBc1A4Hg
https://www.youtube.com/watch?v=xayre9UUY-g
https://www.youtube.com/watch?v=X1pLtD9h8Gw
https://www.youtube.com/watch?v=C5C-g2aZDTg
https://www.youtube.com/watch?v=6zZtUybqUZY
https://www.youtube.com/watch?v=XFFoi_ghkeU
https://www.youtube.com/watch?v=LS6PfoPIgns
https://www.youtube.com/watch?v=_pzIScxsyIk
https://www.youtube.com/watch?v=EuVjHD5iYaQ
https://www.youtube.com/watch?v=CEtNpEGaPoY
https://www.youtube.com/watch?v=AWFxrS6qQSI
https://www.youtube.com/watch?v=nAZNr1_ov2s
https://www.youtube.com/watch?v=gGOkKvm9OPs
https://www.youtube.com/watch?v=KhreN5xyjkA
https://www.youtube.com/watch?v=2zyqCYHZkws
https://www.youtube.com/watch?v=fpw3aGRg0YM
https://www.youtube.com/watch?v=bjxK0GQeA-c
https://www.youtube.com/watch?v=55ZgOnpMlnQ
https://www.youtube.com/watch?v=nJWYLgOubhw
https://www.youtube.com/watch?v=zXyTSPgHPcQ
https://www.youtube.com/watch?v=3UXSH-8V0zA
https://www.youtube.com/watch?v=uJdl9M7nKxc
https://www.youtube.com/watch?v=U-Dl5HoyKZ0
https://www.youtube.com/watch?v=DN6GSi69uV4
https://www.youtube.com/watch?v=8FKL8L0GYIY
https://www.youtube.com/watch?v=0gt-mK_ZV0o
https://www.youtube.com/watch?v=IpU5owQdVj8
https://www.youtube.com/watch?v=aC7eegwbDwE
https://www.youtube.com/watch?v=F0ZknElGdlw
https://www.youtube.com/watch?v=KCm0bct-Bek
https://www.youtube.com/watch?v=bB9XBqasae8
https://www.youtube.com/watch?v=j8AKZEY5rls
https://www.youtube.com/watch?v=RRq0Zu_lYh4
https://www.youtube.com/watch?v=xB3Ut3IGqcM
https://www.youtube.com/watch?v=_pOrlpuMtW8
https://www.youtube.com/watch?v=OyKj4gJ_Sl0
https://www.youtube.com/watch?v=SXUu7vnjSe8
https://www.youtube.com/watch?v=nMQZGF6HI3U
https://www.youtube.com/watch?v=7JGWYhELgv4
https://www.youtube.com/watch?v=snjrSlG26O0
https://www.youtube.com/watch?v=5oJs6nmWl1Y
https://www.youtube.com/watch?v=x5Nt1MLz9hU
https://www.youtube.com/watch?v=-q_abn6-tzk
https://www.youtube.com/watch?v=wYQOvLVhjcg
https://www.youtube.com/watch?v=On3IaKLaoUw
https://www.youtube.com/watch?v=QLXiM8514x0
https://www.youtube.com/watch?v=PW-8JJEh04s
https://www.youtube.com/watch?v=us4IsTmBo48
https://www.youtube.com/watch?v=lHQ8Xbr0nIA
https://www.youtube.com/watch?v=ZoXMMLQkM6s
https://www.youtube.com/watch?v=eE8M1-SAYCU
https://www.youtube.com/watch?v=mA3G6tSO-ik
https://www.youtube.com/watch?v=QIjFpDxCezc
https://www.youtube.com/watch?v=xhNjuv7aGEo
https://www.youtube.com/watch?v=eDgOdetSu-c
https://www.youtube.com/watch?v=94X1RqgFTuM
https://www.youtube.com/watch?v=c2aC_KzOTyA
https://www.youtube.com/watch?v=QjUT86N7ffU
https://www.youtube.com/watch?v=B4WYXYih9b4
https://www.youtube.com/watch?v=VsIH_DXemmc
https://www.youtube.com/watch?v=IESU66ZuQ_A
https://www.youtube.com/watch?v=SSc7Q6ew7tE
https://www.youtube.com/watch?v=iZKh9AAfcdM
https://www.youtube.com/watch?v=pbUp5FZ2pFY
https://www.youtube.com/watch?v=Xxsi-YbbavA
https://www.youtube.com/watch?v=2EoiLZ_Xbb0
https://www.youtube.com/watch?v=rTvZ8e78jSE
https://www.youtube.com/watch?v=jFLbiJI63ko
</textarea>
<div>
<button onclick="start();">Start</button>
</div>
<div>
<div id="player1"></div>
</div>
<div>
<div id="player2"></div>
</div>
<script>
var init = function() {
	
}

var songIndex = 0;
var songList = [];
var playerIndex = 1;
var refreshSongList = function() {
    songList = [];
    $.each($('#songList').val().split(/\n/), function(i, line){
        if(line){
            songList.push(line);
        }
    });
};
var start = function() {
    songIndex = 0;
    
    playNext();
}

var onPlayerStateChange = function() {

}

var loop = function() {
    if(songList.length <= songIndex) songIndex = 0;
}

var playNext = function() {
    refreshSongList();
    loop();
    if(songList.length <= songIndex) return;
    loadPlayer(songList[songIndex++].split("?v=")[1]);
}

var volumeFadeTo = function(player, times) {
    var index = players.indexOf(player);
    var to = index;//player;
    var from = index == 2 ? 1 : 2;

    if(times > 0)
    setTimeout(function() {
        volumeFadeTo(player, times-1)
    }, 1000);

    if(players[to] !== undefined) 
    players[to].setVolume(players[to].getVolume() + 10);
    if(players[from] !== undefined)
    players[from].setVolume(players[from].getVolume() - 10);

}

var onPlayerReady = function(event) {
    event.target.setVolume(0);
    event.target.playVideo();
    volumeFadeTo(event.target, 10);
    console.log(event.target.getDuration());
    setTimeout(playNext, event.target.getDuration() * 1000 - 10000);
    //setTimeout(playNext, 25000);
}

var players = [];

var loadPlayer = function(id) {
    if(playerIndex > 2) playerIndex = 1;
    if(typeof players[playerIndex] !== 'undefined') players[playerIndex].destroy();
    
    players[playerIndex] = new YT.Player('player' + playerIndex, {
              width: '500',
              height: '500',
              videoId: id,
              events: {
                onReady: onPlayerReady,
              //  onStateChange: onPlayerStateChange
              }
            });
    
    playerIndex++;
}

</script>
</body>
</html>